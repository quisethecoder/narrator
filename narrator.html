<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text-to-Speech Narrator</title>
</head>
<body>
    <h1>Text-to-Speech Narrator App</h1>
    <textarea id="text-input" rows="10" cols="50" placeholder="Enter text here..."></textarea><br>
    <button onclick="speakText()">Read Aloud</button>

    <label for="voices">Choose a voice: </label>
    <select id="voices"></select><br><br>

    <label for="rate">Speech Rate: </label>
    <input type="range" id="rate" min="0.1" max="2" step="0.1" value="1">
    <span id="rate-value">1</span><br><br>

    <label for="pitch">Speech Pitch: </label>
    <input type="range" id="pitch" min="0" max="2" step="0.1" value="1">
    <span id="pitch-value">1</span><br><br>

    <button onclick="pauseSpeech()">Pause</button>
    <button onclick="resumeSpeech()">Resume</button>
    <button onclick="startOver()">Start Over</button>

    <script>
        let voices = [];
        let speech = null; // Global variable to store the speech object

        // Populate the voice list when available
        function populateVoices() {
            voices = speechSynthesis.getVoices();
            const voicesSelect = document.getElementById('voices');
            voicesSelect.innerHTML = '';
            voices.forEach(voice => {
                const option = document.createElement('option');
                option.textContent = voice.name;
                option.value = voice.name;
                voicesSelect.appendChild(option);
            });
        }

        // Handle the text-to-speech
        function speakText() {
            const text = document.getElementById("text-input").value;
            const selectedVoice = document.getElementById('voices').value;
            const rate = document.getElementById('rate').value;
            const pitch = document.getElementById('pitch').value;

            if (text !== "") {
                // Create a new speech object every time we speak
                speech = new SpeechSynthesisUtterance(text);
                speech.voice = voices.find(voice => voice.name === selectedVoice);
                speech.rate = rate;
                speech.pitch = pitch;

                // Start the speech
                window.speechSynthesis.speak(speech);
            } else {
                alert("Please enter some text to read.");
            }
        }

        // Pause speech
        function pauseSpeech() {
            if (speech && window.speechSynthesis.speaking) {
                window.speechSynthesis.pause();
            }
        }

        // Resume speech
        function resumeSpeech() {
            if (speech && window.speechSynthesis.paused) {
                window.speechSynthesis.resume();
            }
        }

        // Start Over (re-speak the same text from the beginning)
        function startOver() {
            if (speech) {
                window.speechSynthesis.cancel(); // Stop any ongoing speech
                speakText(); // Restart the speech
            }
        }

        // Update the rate and pitch values on change
        document.getElementById('rate').addEventListener('input', (event) => {
            document.getElementById('rate-value').textContent = event.target.value;
        });

        document.getElementById('pitch').addEventListener('input', (event) => {
            document.getElementById('pitch-value').textContent = event.target.value;
        });

        // Load voices when available
        speechSynthesis.onvoiceschanged = populateVoices;

        // Initialize the voices on load
        window.onload = populateVoices;
    </script>
</body>
</html>

